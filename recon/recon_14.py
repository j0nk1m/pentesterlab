#OBJECTIVE
#For this challenge, your goal is to perform a zone transfer on z.hackycorp.com.

#ZONE TRANSFER
#Zone transfers are usually used to synchronise multiple DNS servers. Only a 
#list of pre-defined hosts should be able to perform this operation. However, 
#it's sometimes possible to retrieve this information and can give you access to new hosts.

#dig @ns1.hackycorp.com z.hackycorp.com axfr

import dns.zone
import dns.resolver
        
domain="z.hackycorp.com"
ns = dns.resolver.resolve(domain, 'NS')
for server in ns:
    print(server.target)
    ip = dns.resolver.resolve(server.target, 'A')
    for a in ip:
        print(a)
        z = dns.zone.from_xfr(dns.query.xfr(str(a), domain))
        for n in z: print(z[n].to_text(n))
